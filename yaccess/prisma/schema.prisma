// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL_DEV")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  Id          Int          @id
  LastName    String
  FirstName   String
  Age         Int?
  Email       String
  Photo       Bytes?
  Password    String
  PhoneNumber String?
  Address     String?
  BadgeList   String?
  Drivers     Driver[]
  Ownerships  Ownership[]
  UserCars    UserCar[]
  IsPassenger IsPassenger[]
}

model Badge {
  Id          Int          @id
  Title       String
  Ownerships  Ownership[]
}

model Car {
  Id          Int          @id
  LicensePlate String
  Brand       String
  Model       String
  NumberOfSeats Int?
  UserCars    UserCar[]
}

model Driver {
  Id            Int         @id
  LicenseNumber String
  UserId        Int
  User          User        @relation(fields: [UserId], references: [Id])
  Trips         Trip[]
}

model Trip {
  Id                Int             @id
  DepartureLocation String
  ArrivalLocation   String
  AppointmentDate   DateTime?
  Distance          Float?
  FareAmount        Float?
  CarbonEco         Float?
  IsFinished        Boolean?
  IsPaid            Boolean?
  Comment           String?
  Rating            Float?
  DriverId          Int
  Driver            Driver          @relation(fields: [DriverId], references: [Id])
  IsPassenger       IsPassenger[]
}

model Ownership {
  UserId    Int
  BadgeId   Int
  User      User  @relation(fields: [UserId], references: [Id])
  Badge     Badge @relation(fields: [BadgeId], references: [Id])
  @@id([UserId, BadgeId])
}

model UserCar {
  UserId    Int
  CarId     Int
  User      User  @relation(fields: [UserId], references: [Id])
  Car       Car   @relation(fields: [CarId], references: [Id])
  @@id([UserId, CarId])
}

model IsPassenger {
  UserId    Int
  TripId    Int
  Comment   String?
  Rating    Float?
  User      User   @relation(fields: [UserId], references: [Id])
  Trip      Trip   @relation(fields: [TripId], references: [Id])
  @@id([UserId, TripId])
}
